var fitFooter=function(){if(!($("#footer").length<1)){var t=$(window).height(),e=parseInt($("body").css("height").replace(/[^-\d\.]/g,"")),n=parseInt($("#footer").css("height").replace(/[^-\d\.]/g,"")),o=parseInt($("#footer").css("margin-top").replace(/[^-\d\.]/g,""));e+n+o<t?($("#footer").css("position","absolute"),$("#footer").css("top",t-(n+o))):($("#footer").css("position","relative"),$("#footer").css("top",0))}},ddSetup=function(){var t=function(){var t=1;$(".show-list ol li").each(function(){$("span.num",$(this)).html(t),t++})};$(".ddconnects").sortable({connectWith:".ddconnects",stop:function(e,n){t()}}).disableSelection();var e=[];$(".hide-list select[name=list-kind]").on("change",function(){"__excluded__"==$(this).val()&&($(".hide-list .ddconnects").empty(),$(e).each(function(){$(".hide-list .ddconnects").append($(this))}))}),$(".ddconnects > li .remove").on("click",function(){$(this).parents(".show-list").length>0&&(e.push($(this).parents("li").clone()),$(this).parents("li").remove(),t())})};$.fn.xswitch=function(){return $(this).each(function(){var t=$(this).empty(),e=$("<div/>").addClass("sw-wrapper").appendTo($(t));$(e).append('<span class="on">'+$(t).attr("data-on")+"</span>").append('<span class="toggle"></span>').append('<span class="off">'+$(t).attr("data-off")+"</span>"),"off"==$(t).attr("data-select")||$(t).hasClass("off")?($(e).css("left","-70px"),$(t).attr("data-select","off").addClass("off")):$(t).attr("data-select","on").addClass("on"),$(t).on("click",function(){return 0==$(e).position().left?($(e).animate({left:-70},"fast"),$(t).addClass("off").removeClass("on").attr("data-select","off"),$(t).trigger("change")):($(e).animate({left:0},"fast"),$(t).addClass("on").removeClass("off").attr("data-select","on"),$(t).trigger("change")),!1})}),$(this)},$.fn.xpopup=function(t){return $(this).each(function(){var t=$(this),e=$(t).nextAll(".xpopup");$(t).on("click",function(){return $(e).css("left",$(t).position().left-$(e).width()/2+10).css("top",$(t).position().top+$(t).height()+10).toggle("fade"),!1}),$(".btn-close",e).on("click",function(){return $(e).toggle("fade"),!1})}),$(this)},$.fn.xselect=function(t){return $(this).each(function(){var t=$(this);$(".dropdown-menu li",$(t)).on("click",function(e){var n=$(t).find(".dropdown-toggle span.title"),o=$(this).text();n.text(o),e.preventDefault()})}),$(this)},$.fn.xchecklist=function(t){return $(this).each(function(){var t=$(this);$(".dropdown-menu li",$(t)).on("click",function(e){var n=$(t).find(".dropdown-toggle span.title"),o=[];$(this).parent().find("input[type=checkbox]").each(function(t,e){(e=$(e)).prop("checked")&&o.push(e.next("label span").text().trim())}),0===o.length&&o.push("選択してください"),n.text(o.join(", ")),e.stopPropagation()}),$(".dropdown-menu li.checklist-close").on("click",function(e){return $(t).removeClass("open"),!1})}),$(this)},$.fn.xbookmark_list=function(){return $(this).each(function(){var t=$(this);$("li",$(t)).on("click",function(e){var n=$(t).parents(".dropdown").find(".dropdown-toggle span.title"),o=$(".title",$(this)).text();n.text(o)}),$(".action_close_mini",$(t)).on("click",function(){return $(this).parents("li").hide("fade",function(){$(this).remove()}),!1})}),$(this)},$.fn.xbookmark_add=function(){return $(this).each(function(){var t=$(this);$(".input-group, input, .btn-primary",$(t)).on("click",function(t){t.stopPropagation()})}),$(this)},$.fn.xcalendar=function(t,e){var n=$(this),o=new Date((new Date).getTime()-864e5),a=new Date(o.getTime()-11232e5);return(t=t||{date:[a,o]}).inline=!0,t.date=t.date||[a,o],t.calendars=3,t.mode="range",t.current=new Date(o.getFullYear(),o.getMonth()-1,1),t.onChange=function(t,o){n.children("button.dropdown-toggle").html('<span class="title">'+t[0].toLocaleDateString()+"～"+t[1].toLocaleDateString()+'</span>&nbsp;&nbsp;<span class="caret"></span>'),e&&e(n,t)},locale&&(t.locale=locale),t.onChange(t.date,null),$(".calendar.calendar-duration",n).DatePicker(t),$(".dropdown-menu li",n).on("click",function(t){t.stopPropagation()}),$(".dropdown-menu li.calendar-close",n).on("click",function(t){return n.removeClass("open"),n.trigger("hide.bs.dropdown",t),n.trigger("hidden.bs.dropdown",t),!1}),$(this)},$.fn.singleCalendar=function(t,e){var n=$(this),o=new Date((new Date).getTime()-864e5);return(t=t||{date:o}).inline=!0,t.onChange=function(t,o){n.children("button.dropdown-toggle").html('<span class="title">'+(void 0!==t&&null!==t&&""!==t&&"Invalid Date"!==t.toString()?t.toLocaleDateString():"選択してください")+'</span>&nbsp;&nbsp;<span class="caret"></span>'),e&&e(n,t)},locale&&(t.locale=locale),t.onChange(t.date,null),$(".calendar.calendar-date",n).DatePicker(t),$(".dropdown-menu li",n).on("click",function(t){t.stopPropagation()}),$(".dropdown-menu li.calendar-close",n).on("click",function(t){return n.removeClass("open"),n.trigger("hide.bs.dropdown",t),n.trigger("hidden.bs.dropdown",t),!1}),$(this)},$.fn.remove_marker=function(){return $(this).each(function(){var t=$(this);$(t).on("click",function(){return $(t).parents(".row").hide("fade",function(){$(this).remove()}),!1})}),$(this)};var graph_reflow=function(){var t;$(".graph-container").each(function(){t=$(this).attr("id"),$("#"+t).highcharts().reflow()})};$(function(){$(window).on("resize",fitFooter),fitFooter(),new ResizeSensor($("body"),function(){fitFooter()}),$(".ddconnects").length>0&&ddSetup(),$("textarea.copy").attr("readonly","readonly").on("focus",function(){$(this).select()}).on("click",function(){return $(this).select(),!1}),$(".headerhelp").on("click",function(){return $(".help-box").toggle("fade",200),!1}),$("input[type=checkbox].select-all").on("click",function(){var t=$("#"+$(this).attr("data-for"));return $(t).length>0&&($(this).prop("checked")?$("input[type=checkbox]",$(t)).each(function(){$(this).prop("checked",!1),$(this).trigger("click")}):$("input[type=checkbox]",$(t)).each(function(){$(this).prop("checked",!0),$(this).trigger("click")})),!0}),$(".append-template").on("click",function(){var t=$("#"+$(this).attr("data-template"));if($(t).length>0){var e=t.clone();$("select",$(e)).each(function(){$(this).xdropdown()}),$(".row-marker.remove",$(e)).on("click",function(){return $(e).fadeOut("fast",function(){$(e).remove()}),!1}),$(e).removeClass("js-template").removeAttr("id").insertBefore(t)}return!1}),$(".detail-table .show-detail a").on("click",function(){var t=$(this),e=$(this).parent(),n=$(e).parent().next();return $(e).hasClass("opened")?$(n).hide("fade",200,function(){$(e).removeClass("opened"),$(t).empty().append("＋")}):$(n).show("fade",200,function(){$(e).addClass("opened"),$(t).empty().append("-")}),!1}),$(".submenu").each(function(){var t=$(this);$("> a",$(t)).on("click",function(){return $(t).toggleClass("submenu-opened"),setTimeout(function(){fitFooter()},300),!1})});$(".content").css("marginLeft");function t(){return $("body").animate({backgroundPosition:"-230px"},350,"easeOutExpo"),$(".xmenu").animate({left:"-217px"},350,"easeOutExpo"),$(".content").animate({marginLeft:30},350,"easeOutExpo",function(){graph_reflow()}),$(this).one("click",e),$(".xmenu .toggle-menu .toggle").addClass("closed"),n(),!1}function e(){return $("body").animate({backgroundPosition:"0"},350,"easeOutExpo"),$(".xmenu").animate({left:"15px"},350,"easeOutExpo"),$(".content").animate({marginLeft:"237px"},350,"easeOutExpo",function(){graph_reflow()}),$(this).one("click",t),$(".xmenu .toggle-menu .toggle").removeClass("closed"),n(),!1}function n(){$.ajax({url:API_PREFIX+"/report/menu/toggle/"+SITE_ID,method:"GET",global:!1,timeout:AJAX_TIMEOUT})}"undefined"==typeof __sideMenu||1==__sideMenu?$(".xmenu .toggle").one("click",t):$(".xmenu .toggle").one("click",e),$(".xswitch").xswitch(),$(".xselect").xselect(),$(".xchecklist").xchecklist(),$(".xcalendar").xcalendar("undefined"!=typeof MAIN_CALENDAR_OPTION?MAIN_CALENDAR_OPTION:null,"undefined"!=typeof MAIN_CALENDAR_CALLBACK?MAIN_CALENDAR_CALLBACK:null),$(".bookmark-list").xbookmark_list(),$(".bookmark-add").xbookmark_add(),$(".popup-action").xpopup(),$(".tablesorter").tablesorter({sortReset:!0,sortRestart:!0,sortInitialOrder:"desc"}),$(".scrollbar").perfectScrollbar()});